import{c as j,r as s,d as E,a as F,b as S,j as e,H as M,L as X}from"./index-CuLUR7ue.js";import{C as A,U as T}from"./user-CLQm5Qt5.js";import{L as P}from"./lock-Sx6PCg1D.js";import{P as _}from"./phone-cKmzEvEj.js";import{M as q}from"./map-pin-C7Y8q8FH.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I=j("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B=j("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D=j("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]),R=()=>{const{user:t,signIn:a,signUp:r}=E(),c=F(),{toast:d}=S(),b=s.useRef(!0),[l,k]=s.useState(!0),[g,y]=s.useState(!1),[n,v]=s.useState({email:"",password:"",full_name:"",phone:"",address:""}),[u,f]=s.useState(0),[o,w]=s.useState(!1),[N,C]=s.useState(!1);s.useEffect(()=>{t&&b.current&&(c("/",{replace:!0}),b.current=!1)},[t,c]),s.useEffect(()=>{if(u>=5){const i=setTimeout(()=>{w(!1),f(0)},18e5);return()=>clearTimeout(i)}},[u]);const L=s.useCallback(async i=>{if(i.preventDefault(),!o){y(!0),b.current=!0;try{l?(await a(n.email,n.password),d({title:"مرحباً بك!",description:"تم تسجيل الدخول بنجاح"})):(await r(n.email,n.password,{full_name:n.full_name,phone:n.phone,address:n.address}),d({title:"تم إنشاء الحساب!",description:"يرجى مراجعة بريدك الإلكتروني لتأكيد الحساب"})),f(0)}catch(x){const p=u+1;f(p),p>=5&&w(!0);const h=x instanceof Error?x.message:"حدث خطأ غير متوقع";d({title:"خطأ في المصادقة",description:h,variant:"destructive"})}finally{y(!1)}}},[l,n,u,o,a,r,d]),m=s.useCallback(i=>{const{name:x,value:p}=i.target;v(h=>({...h,[x]:p}))},[]),z=s.useCallback(()=>{k(i=>!i),v({email:"",password:"",full_name:"",phone:"",address:""})},[]);return e.jsxs("div",{dir:"rtl",className:"min-h-screen bg-gradient-to-b from-amber-50 to-orange-50 flex items-center justify-center px-6",children:[e.jsxs(M,{children:[e.jsxs("title",{children:[l?"تسجيل الدخول":"إنشاء حساب"," - قهوة دمنهور"]}),e.jsx("meta",{name:"description",content:l?"سجل الدخول إلى حسابك في قهوة دمنهور للوصول إلى جميع الميزات":"انشئ حساب جديد في قهوة دمنهور للبدء في تجربة التسوق المميزة"})]}),e.jsxs("div",{className:"max-w-md w-full",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx(A,{className:"mx-auto mb-4 text-amber-700",size:64}),e.jsx("h1",{className:"text-3xl font-bold text-amber-900",children:"قهوة دمنهور"}),e.jsx("p",{className:"text-amber-700 mt-2",children:l?"مرحباً بعودتك":"انضم إلى عائلة قهوة دمنهور"})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8",children:[e.jsxs("form",{onSubmit:L,className:"space-y-6",children:[e.jsx(U,{value:n.email,onChange:m,disabled:o}),e.jsx(H,{value:n.password,onChange:m,disabled:o,showPassword:N,onTogglePassword:()=>C(!N)}),!l&&e.jsxs(e.Fragment,{children:[e.jsx(O,{value:n.full_name,onChange:m,disabled:o}),e.jsx($,{value:n.phone,onChange:m,disabled:o}),e.jsx(G,{value:n.address,onChange:m,disabled:o})]}),e.jsx(J,{isLogin:l,loading:g,disabled:g||o})]}),e.jsx(K,{isLogin:l,onClick:z}),e.jsx(Q,{})]})]})]})},U=s.memo(({value:t,onChange:a,disabled:r})=>e.jsxs("div",{children:[e.jsxs("label",{className:"flex items-center space-x-2 space-x-reverse text-amber-800 font-medium mb-2",children:[e.jsx(D,{size:20}),e.jsx("span",{children:"البريد الإلكتروني"})]}),e.jsx("input",{type:"email",name:"email",value:t,onChange:a,required:!0,disabled:r,className:"w-full px-4 py-3 border border-amber-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-amber-500 disabled:opacity-50",placeholder:"example@email.com"})]})),H=s.memo(({value:t,onChange:a,disabled:r,showPassword:c,onTogglePassword:d})=>e.jsxs("div",{children:[e.jsxs("label",{className:"flex items-center space-x-2 space-x-reverse text-amber-800 font-medium mb-2",children:[e.jsx(P,{size:20}),e.jsx("span",{children:"كلمة المرور"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:c?"text":"password",name:"password",value:t,onChange:a,required:!0,minLength:8,disabled:r,className:"w-full px-4 py-3 border border-amber-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-amber-500 disabled:opacity-50 pr-12",placeholder:"••••••••"}),e.jsx("button",{type:"button",onClick:d,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-amber-600 hover:text-amber-800 focus:outline-none","aria-label":c?"إخفاء كلمة المرور":"إظهار كلمة المرور",children:c?e.jsx(I,{size:20}):e.jsx(B,{size:20})})]})]})),O=s.memo(({value:t,onChange:a,disabled:r})=>e.jsxs("div",{children:[e.jsxs("label",{className:"flex items-center space-x-2 space-x-reverse text-amber-800 font-medium mb-2",children:[e.jsx(T,{size:20}),e.jsx("span",{children:"الاسم الكامل"})]}),e.jsx("input",{type:"text",name:"full_name",value:t,onChange:a,required:!0,disabled:r,className:"w-full px-4 py-3 border border-amber-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-amber-500 disabled:opacity-50",placeholder:"أدخل اسمك الكامل"})]})),$=s.memo(({value:t,onChange:a,disabled:r})=>e.jsxs("div",{children:[e.jsxs("label",{className:"flex items-center space-x-2 space-x-reverse text-amber-800 font-medium mb-2",children:[e.jsx(_,{size:20}),e.jsx("span",{children:"رقم الهاتف"})]}),e.jsx("input",{type:"tel",name:"phone",value:t,onChange:a,required:!0,pattern:"^01[0-9]{9}$",title:"يجب أن يكون رقم الهاتف مكون من 11 رقم ويبدأ بـ 01",disabled:r,className:"w-full px-4 py-3 border border-amber-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-amber-500 disabled:opacity-50",placeholder:"01XXXXXXXXX"})]})),G=s.memo(({value:t,onChange:a,disabled:r})=>e.jsxs("div",{children:[e.jsxs("label",{className:"flex items-center space-x-2 space-x-reverse text-amber-800 font-medium mb-2",children:[e.jsx(q,{size:20}),e.jsx("span",{children:"العنوان"})]}),e.jsx("textarea",{name:"address",value:t,onChange:a,required:!0,disabled:r,className:"w-full px-4 py-3 border border-amber-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-amber-500 resize-none disabled:opacity-50",rows:3,placeholder:"أدخل عنوانك التفصيلي"})]})),J=s.memo(({isLogin:t,loading:a,disabled:r})=>e.jsx("button",{type:"submit",disabled:r,className:"w-full bg-amber-600 text-white py-3 rounded-lg hover:bg-amber-700 transition-colors font-bold text-lg disabled:opacity-50 disabled:cursor-not-allowed flex justify-center items-center",children:a?e.jsx(X,{className:"animate-spin mr-2",size:24}):t?"تسجيل الدخول":"إنشاء حساب"})),K=s.memo(({isLogin:t,onClick:a})=>e.jsx("div",{className:"mt-6 text-center",children:e.jsx("button",{onClick:a,className:"text-amber-600 hover:text-amber-800 font-medium",children:t?"ليس لديك حساب؟ إنشاء حساب جديد":"لديك حساب بالفعل؟ تسجيل الدخول"})})),Q=s.memo(()=>e.jsx("div",{className:"mt-6 pt-6 border-t border-amber-100 text-center text-sm text-amber-700",children:"باستخدام هذا التطبيق، أنت توافق على شروط الخدمة وسياسة الخصوصية"})),se=s.memo(R);export{se as default};
